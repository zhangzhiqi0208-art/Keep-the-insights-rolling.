# FeedbackBridge 部署流程图

## 🚀 完整部署流程

```
开始部署
    ↓
┌─────────────────────────────────────────────────────────────┐
│                   第一步：部署后端到 Railway                │
└─────────────────────────────────────────────────────────────┘
    ↓
┌─────────────────────────────────────────────────────────────┐
│ 1. 访问 https://railway.app                                 │
│ 2. 点击 "Login" → "Login with GitHub"                      │
│ 3. 点击 "New Project" → "Upload from your computer"       │
│ 4. 选择 deploy-packages/backend 文件夹                     │
│ 5. 点击 "Upload"                                           │
└─────────────────────────────────────────────────────────────┘
    ↓
┌─────────────────────────────────────────────────────────────┐
│ 6. 在 "Variables" 标签页添加环境变量：                      │
│    - Name: DEEPSEEK_API_KEY                                │
│    - Value: your_deepseek_api_key_here                     │
│ 7. 等待部署完成                                            │
│ 8. 在 "Settings" → "Domains" 复制后端地址                   │
└─────────────────────────────────────────────────────────────┘
    ↓
┌─────────────────────────────────────────────────────────────┐
│                   第二步：修改前端配置                      │
└─────────────────────────────────────────────────────────────┘
    ↓
┌─────────────────────────────────────────────────────────────┐
│ 1. 打开 deploy-packages/frontend/script.js                  │
│ 2. 找到：const API_BASE_URL = 'http://localhost:8000';     │
│ 3. 修改为：const API_BASE_URL = 'https://your-app.railway.app'; │
│ 4. 保存文件                                                │
└─────────────────────────────────────────────────────────────┘
    ↓
┌─────────────────────────────────────────────────────────────┐
│                   第三步：部署前端到 Vercel                │
└─────────────────────────────────────────────────────────────┘
    ↓
┌─────────────────────────────────────────────────────────────┐
│ 1. 访问 https://vercel.com                                 │
│ 2. 点击 "Sign Up" → "Continue with GitHub"                │
│ 3. 点击 "New Project" → "Upload"                            │
│ 4. 拖拽 deploy-packages/frontend 文件夹到上传区域          │
│ 5. 点击 "Deploy"                                           │
└─────────────────────────────────────────────────────────────┘
    ↓
┌─────────────────────────────────────────────────────────────┐
│ 6. 等待部署完成                                            │
│ 7. 复制生成的前端地址                                       │
└─────────────────────────────────────────────────────────────┘
    ↓
┌─────────────────────────────────────────────────────────────┐
│                   第四步：测试和分享                        │
└─────────────────────────────────────────────────────────────┘
    ↓
┌─────────────────────────────────────────────────────────────┐
│ 1. 在浏览器中访问前端地址                                   │
│ 2. 填写测试问题并点击转化                                  │
│ 3. 如果转化成功，说明部署完成                               │
│ 4. 分享前端地址给用户                                      │
└─────────────────────────────────────────────────────────────┘
    ↓
┌─────────────────────────────────────────────────────────────┐
│                       部署完成！                           │
└─────────────────────────────────────────────────────────────┘
```

## 🔍 关键步骤说明

### Railway 部署关键点
```
访问 https://railway.app
    ↓
点击 "Login" → "Login with GitHub"
    ↓
点击 "New Project" → "Upload from your computer"
    ↓
选择 deploy-packages/backend 文件夹
    ↓
点击 "Upload"
    ↓
在 "Variables" 标签页添加环境变量
    ↓
等待部署完成，复制后端地址
```

### Vercel 部署关键点
```
访问 https://vercel.com
    ↓
点击 "Sign Up" → "Continue with GitHub"
    ↓
点击 "New Project" → "Upload"
    ↓
拖拽 deploy-packages/frontend 文件夹
    ↓
点击 "Deploy"
    ↓
等待部署完成，复制前端地址
```

## ⚠️ 注意事项

### 必须完成的步骤
1. ✅ 设置 Railway 环境变量
2. ✅ 修改前端 API 地址
3. ✅ 等待部署完成
4. ✅ 测试功能正常

### 常见错误
1. ❌ 忘记设置环境变量
2. ❌ 忘记修改前端 API 地址
3. ❌ 上传错误的文件夹
4. ❌ 没有等待部署完成

## 🎯 成功标志

### 后端部署成功
- Railway 显示 "Deployed" 状态
- 访问后端地址看到 API 响应
- 环境变量设置正确

### 前端部署成功
- Vercel 显示 "Ready" 状态
- 访问前端地址看到界面
- 转化功能正常工作

### 整体部署成功
- 前后端连接正常
- 转化功能正常
- 移动端访问正常
- 分享链接可用

## 📱 分享格式

```
🎉 FeedbackBridge 智能反馈转化系统已上线！

🔗 访问地址：https://your-app-name.vercel.app

📝 使用说明：
1. 选择模板类型（设计体验问题/用户原声清洗）
2. 输入问题描述
3. 上传相关图片（可选）
4. 选择地区和模块
5. 点击一键转化

💡 如有问题或建议，请随时反馈！
```

## 🔄 更新流程

```
修改代码
    ↓
重新上传到对应平台
    ↓
平台自动重新部署
    ↓
新版本自动生效
```

## 📞 问题排查

### 后端问题
1. 检查环境变量设置
2. 查看构建日志
3. 验证 Python 版本
4. 检查依赖包

### 前端问题
1. 检查文件上传
2. 查看构建日志
3. 验证 API 地址
4. 检查浏览器控制台

### 连接问题
1. 验证 API 地址配置
2. 检查 CORS 设置
3. 确认服务状态
4. 测试网络连接
